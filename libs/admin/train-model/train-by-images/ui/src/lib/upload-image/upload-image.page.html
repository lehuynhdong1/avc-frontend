<ng-container *ngIf="{fileLength: fileLengthChanged$ | async} as view">
  <h1 class="mb-2">
    <tui-svg src="assets/adc/icons/images.svg#images" class="size-m mr-2"></tui-svg>
    Train by Images
  </h1>
  <tui-stepper [activeItemIndex]="0">
    <button tuiStep icon="assets/adc/icons/cloud-upload.svg#cloud-upload">
      <b class="text-primary">Upload Images</b>
    </button>
    <button tuiStep disabled icon="assets/adc/icons/scan-circle.svg#scan-circle">
      Label Images
    </button>
    <button tuiStep disabled icon="assets/adc/icons/speedometer.svg#speedometer">Progress</button>
  </tui-stepper>
  <div class="flex items-center mb-6">
    <div class="flex-grow">
      <h2 class="mb-2">
        <tui-svg src="assets/adc/icons/cloud-upload.svg#cloud-upload" class="size-m mr-2"></tui-svg
        >Upload Images
      </h2>
      <p class="mt-0 text-base">Upload then label images online for a better training model.</p>
    </div>

    <tui-badge
      class="tui-space_right-2"
      [status]="TUI_SUCCESS"
      size="l"
      *ngIf="view.fileLength"
      [value]="view.fileLength + ' image' + (view.fileLength === 1 ? '': 's' )+' has uploaded.'"
    >
      <tui-svg src="tuiIconCheckCircleLarge" class="mr-2"></tui-svg>
    </tui-badge>
    <button
      tuiButton
      type="button"
      size="m"
      iconRight="tuiIconChevronRight"
      class="tui-space_right-3 tui-space_bottom-3"
      appearance="primary"
      routerLink="../label-image"
      [disabled]="!view.fileLength"
    >
      Label Images
    </button>
  </div>
  <div class="flex flex-col justify-center items-center w-100">
    <img
      src="assets/images/upload-image.svg"
      alt="Upload image"
      class="w-1/2 max-w-md mb-6 transition-all"
      [class.slowly-hide]="view.fileLength"
    />
    <tui-input-file
      link="Choose your training images"
      label="or drop these here..."
      [accept]="ACCEPTED_FILE_TYPES"
      [formControl]="files"
      [multiple]="true"
      [maxFileSize]="MAX_FILE_SIZE"
      size="l"
    ></tui-input-file>
    <div class="w-full" [style.height.rem]="(view.fileLength || 0) * 5.4"></div>
  </div>
</ng-container>
