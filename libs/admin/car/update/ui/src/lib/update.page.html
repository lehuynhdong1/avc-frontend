<aside class="flex-grow flex-shrink-0 relative">
  <tui-svg
    class="top-right cursor-pointer hover:text-red-400"
    src="tuiIconRemoveLarge"
    routerLink="/car"
  ></tui-svg>
  <form class="p-5 flex flex-col" [formGroup]="form" *ngIf="car$| async as car">
    <h2>Update Car</h2>
    <adc-frontend-avatar
      [url]="car.image"
      placeholderClass="!text-primary border border-solid border-primary rounded-full p-3"
      placeholderImageAsset="assets/taiga-ui/icons/car-sport.svg#car-sport"
      size="xl"
      class="mb-3"
    ></adc-frontend-avatar>
    <div class="flex flex-col mb-3">
      <label>Name </label>
      <h2 class="my-0 ml-2">{{car.name}}</h2>
    </div>
    <div class="flex flex-col mb-3">
      <label>Device ID </label>
      <h2 class="my-0 ml-2">{{car.deviceId}}</h2>
    </div>

    <label class="mt-3 mb-2">Managed by</label>
    <tui-select
      *tuiLet="managers$ | async as managers"
      tuiTextfieldSize="m"
      [tuiTextfieldLabelOutside]="true"
      [tuiTextfieldCleaner]="true"
      [valueContent]="managers ? stringifyManagers(managers) : loading"
      tuiTextfieldExampleText="Select manager for this car."
      formControlName="managedBy"
      class="mb-3"
    >
      <span class="text-gray-300">
        Select manager for this car
        <tui-svg src="tuiIconEdit"></tui-svg>
      </span>

      <ng-template tuiDataList>
        <tui-data-list *ngIf="managers else loading">
          <button tuiOption *ngFor="let manager of managers" [value]="manager.id">
            {{manager.firstName}} {{manager.lastName}}
          </button>
        </tui-data-list>
      </ng-template>
    </tui-select>

    <button tuiButton (click)="clickUpdate$.next()" size="m" [disabled]="form.invalid" class="mb-2">
      Save
    </button>
    <button tuiButton (click)="clickDiscard$.next()" size="m" appearance="outline">Discard</button>
  </form>
  <ng-template #loading> Loading </ng-template>
</aside>
