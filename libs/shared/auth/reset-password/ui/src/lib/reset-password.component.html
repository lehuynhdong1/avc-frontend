<main class="flex flex-col justify-center w-full">
  <h1 class="mt-6 text-center text-3xl font-extrabold text-gray-900">Reset password?</h1>
  <div class="text-sm text-center mb-3 w-75">
    Check your mailbox and fill the secret key
    <div class="inline-block">to reset your password</div>
  </div>
  <form class="flex flex-col mb-3 space-y-3" [formGroup]="form" (ngSubmit)="reset$.next()">
    <tui-input formControlName="email" [disabled]="true">Your email </tui-input>
    <tui-input formControlName="code" [tuiTextfieldMaxLength]="6">Your security key </tui-input>
    <tui-input-password
      formControlName="password"
      [tuiHintContent]="passwordInfo"
      tuiHintDirection="top-right"
    >
      Your Password
    </tui-input-password>
    <tui-input-password
      formControlName="confirmedPassword"
      [tuiHintContent]="confirmedPasswordInfo"
      tuiHintDirection="top-right"
    >
      Confirmed Password
    </tui-input-password>

    <button
      tuiButton
      class="w-full mb-3"
      size="l"
      type="submit"
      [disabled]="form.invalid"
      [showLoader]="(loading$ | async) || false"
    >
      Reset your password
    </button>

    <div class="text-base">
      Return to
      <a routerLink="/login" class="no-underline font-bold text-primary hover:text-primary-active"
        >Log in</a
      >
    </div>
  </form>
</main>

<ng-template #passwordInfo>
  <section class="flex flex-col flex-wrap">
    <div>
      <tui-svg
        [src]="
          form?.get('password')?.errors?.required || form?.get('password')?.errors?.minlength
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="
          form?.get('password')?.errors?.required || form?.get('password')?.errors?.minlength
        "
      ></tui-svg>
      Password has 6 characters at least.
    </div>
    <div>
      <tui-svg
        [src]="
          form?.get('password')?.errors?.required || form?.get('password')?.errors?.maxlength
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="
          form?.get('password')?.errors?.required || form?.get('password')?.errors?.maxlength
        "
      ></tui-svg>
      Password has 16 characters at max.
    </div>
  </section>
</ng-template>
<ng-template #confirmedPasswordInfo>
  <section class="flex flex-col flex-wrap">
    <div>
      <tui-svg
        [src]="
          form?.get('confirmedPassword')?.errors?.required ||
          form?.get('confirmedPassword')?.errors?.minlength
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="
          form?.get('confirmedPassword')?.errors?.required ||
          form?.get('confirmedPassword')?.errors?.minlength
        "
      ></tui-svg>
      Confirmed password has 6 characters at least.
    </div>
    <div>
      <tui-svg
        [src]="
          form?.get('confirmedPassword')?.errors?.required ||
          form?.get('confirmedPassword')?.errors?.maxlength
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="
          form?.get('confirmedPassword')?.errors?.required ||
          form?.get('confirmedPassword')?.errors?.maxlength
        "
      ></tui-svg>
      Confirmed password has 16 characters at max.
    </div>
    <div>
      <tui-svg
        [src]="
          form?.get('confirmedPassword')?.errors?.isMatching === false
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="form?.get('confirmedPassword')?.errors?.isMatching === false"
      ></tui-svg>
      Confirmed password matches the new password.
    </div>
  </section>
</ng-template>
